/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@codemirror/lang-javascript@6.2.4/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{parser as e}from"@lezer/javascript";import{syntaxTree as t,LRLanguage as n,indentNodeProp as o,continuedIndent as r,flatIndent as a,delimitedIndent as i,foldNodeProp as l,foldInside as s,sublanguageProp as c,LanguageSupport as m,defineLanguageFacet as p}from"@codemirror/language";import{EditorSelection as f}from"@codemirror/state";import{EditorView as u}from"@codemirror/view";import{snippetCompletion as d,ifNotIn as y,completeFromList as g}from"@codemirror/autocomplete";import{IterMode as b,NodeWeakMap as h}from"@lezer/common";const S=[d("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),d("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),d("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),d("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),d("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),d("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),d("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),d("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),d("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),d('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),d('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],$=S.concat([d("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),d("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),d("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),x=new h,w=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function v(e){return(t,n)=>{let o=t.node.getChild("VariableDefinition");return o&&n(o,e),!0}}const k=["FunctionDeclaration"],T={FunctionDeclaration:v("function"),ClassDeclaration:v("class"),ClassExpression:()=>!0,EnumDeclaration:v("constant"),TypeAliasDeclaration:v("type"),NamespaceDeclaration:v("namespace"),VariableDefinition(e,t){e.matchContext(k)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function J(e,t){let n=x.get(t);if(n)return n;let o=[],r=!0;function a(t,n){let r=e.sliceString(t.from,t.to);o.push({label:r,type:n})}return t.cursor(b.IncludeAnonymous).iterate((t=>{if(r)r=!1;else if(t.name){let e=T[t.name];if(e&&e(t,a)||w.has(t.name))return!1}else if(t.to-t.from>8192){for(let n of J(e,t.node))o.push(n);return!1}})),x.set(t,o),o}const X=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,C=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function D(e){let n=t(e.state).resolveInner(e.pos,-1);if(C.indexOf(n.name)>-1)return null;let o="VariableName"==n.name||n.to-n.from<20&&X.test(e.state.sliceDoc(n.from,n.to));if(!o&&!e.explicit)return null;let r=[];for(let t=n;t;t=t.parent)w.has(t.name)&&(r=r.concat(J(e.state.doc,t)));return{options:r,from:o?n.from:e.pos,validFor:X}}function A(e,t,n){var o;let r=[];for(;;){let a,i=t.firstChild;if("VariableName"==(null==i?void 0:i.name))return r.push(e(i)),{path:r.reverse(),name:n};if("MemberExpression"!=(null==i?void 0:i.name)||"PropertyName"!=(null===(o=a=i.lastChild)||void 0===o?void 0:o.name))return null;r.push(e(a)),t=i}}function E(e){let n=t=>e.state.doc.sliceString(t.from,t.to),o=t(e.state).resolveInner(e.pos,-1);return"PropertyName"==o.name?A(n,o.parent,n(o)):"."!=o.name&&"?."!=o.name||"MemberExpression"!=o.parent.name?C.indexOf(o.name)>-1?null:"VariableName"==o.name||o.to-o.from<20&&X.test(n(o))?{path:[],name:n(o)}:"MemberExpression"==o.name?A(n,o,""):e.explicit?{path:[],name:""}:null:A(n,o.parent,"")}function O(e){let t=new Map;return n=>{let o=E(n);if(!o)return null;let r=e;for(let e of o.path)if(r=r[e],!r)return null;let a=t.get(r);return a||t.set(r,a=function(e,t){let n=[],o=new Set;for(let r=0;;r++){for(let a of(Object.getOwnPropertyNames||Object.keys)(e)){if(!/^[a-zA-Z_$\xaa-\uffdc][\w$\xaa-\uffdc]*$/.test(a)||o.has(a))continue;let i;o.add(a);try{i=e[a]}catch(e){continue}n.push({label:a,type:"function"==typeof i?/^[A-Z]/.test(a)?"class":t?"function":"method":t?"variable":"property",boost:-r})}let a=Object.getPrototypeOf(e);if(!a)return n;e=a}}(r,!o.path.length)),{from:n.pos-o.name.length,options:a,validFor:X}}}const I=n.define({name:"javascript",parser:e.configure({props:[o.add({IfStatement:r({except:/^\s*({|else\b)/}),TryStatement:r({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:a,SwitchBody:e=>{let t=e.textAfter,n=/^\s*\}/.test(t),o=/^\s*(case|default)\b/.test(t);return e.baseIndent+(n?0:o?1:2)*e.unit},Block:i({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":r({except:/^\s*{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),l.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":s,BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),B={test:e=>/^JSX/.test(e.name),facet:p({commentTokens:{block:{open:"{/*",close:"*/}"}}})},j=I.configure({dialect:"ts"},"typescript"),F=I.configure({dialect:"jsx",props:[c.add((e=>e.isTop?[B]:void 0))]}),N=I.configure({dialect:"jsx ts",props:[c.add((e=>e.isTop?[B]:void 0))]},"typescript");let P=e=>({label:e,type:"keyword"});const V="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(P),M=V.concat(["declare","implements","private","protected","public"].map(P));function L(e={}){let t=e.jsx?e.typescript?N:F:e.typescript?j:I,n=e.typescript?$.concat(M):S.concat(V);return new m(t,[I.data.of({autocomplete:y(C,g(n))}),I.data.of({autocomplete:D}),e.jsx?z:[]])}function _(e,t,n=e.length){for(let o=null==t?void 0:t.firstChild;o;o=o.nextSibling)if("JSXIdentifier"==o.name||"JSXBuiltin"==o.name||"JSXNamespacedName"==o.name||"JSXMemberExpression"==o.name)return e.sliceString(o.from,Math.min(o.to,n));return""}const R="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),z=u.inputHandler.of(((e,n,o,r,a)=>{if((R?e.composing:e.compositionStarted)||e.state.readOnly||n!=o||">"!=r&&"/"!=r||!I.isActiveAt(e.state,n,-1))return!1;let i=a(),{state:l}=i,s=l.changeByRange((e=>{var n;let o,{head:a}=e,i=t(l).resolveInner(a-1,-1);if("JSXStartTag"==i.name&&(i=i.parent),l.doc.sliceString(a-1,a)!=r||"JSXAttributeValue"==i.name&&i.to>a);else{if(">"==r&&"JSXFragmentTag"==i.name)return{range:e,changes:{from:a,insert:"</>"}};if("/"==r&&"JSXStartCloseTag"==i.name){let e=i.parent,t=e.parent;if(t&&e.from==a-2&&((o=_(l.doc,t.firstChild,a))||"JSXFragmentTag"==(null===(n=t.firstChild)||void 0===n?void 0:n.name))){let e=`${o}>`;return{range:f.cursor(a+e.length,-1),changes:{from:a,insert:e}}}}else if(">"==r){let t=function(e){for(;;){if("JSXOpenTag"==e.name||"JSXSelfClosingTag"==e.name||"JSXFragmentTag"==e.name)return e;if("JSXEscape"==e.name||!e.parent)return null;e=e.parent}}(i);if(t&&"JSXOpenTag"==t.name&&!/^\/?>|^<\//.test(l.doc.sliceString(a,a+2))&&(o=_(l.doc,t,a)))return{range:e,changes:{from:a,insert:`</${o}>`}}}}return{range:e}}));return!s.changes.empty&&(e.dispatch([i,l.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}));function Z(e,t){return t||(t={parserOptions:{ecmaVersion:2019,sourceType:"module"},env:{browser:!0,node:!0,es6:!0,es2015:!0,es2017:!0,es2020:!0},rules:{}},e.getRules().forEach(((e,n)=>{var o;(null===(o=e.meta.docs)||void 0===o?void 0:o.recommended)&&(t.rules[n]=2)}))),n=>{let{state:o}=n,r=[];for(let{from:n,to:a}of I.findRegions(o)){let i=o.doc.lineAt(n),l={line:i.number-1,col:n-i.from,pos:n};for(let i of e.verify(o.sliceDoc(n,a),t))r.push(q(i,o.doc,l))}return r}}function H(e,t,n,o){return n.line(e+o.line).from+t+(1==e?o.col-1:-1)}function q(e,t,n){let o=H(e.line,e.column,t,n),r={from:o,to:null!=e.endLine&&1!=e.endColumn?H(e.endLine,e.endColumn,t,n):o,message:e.message,source:e.ruleId?"eslint:"+e.ruleId:"eslint",severity:1==e.severity?"warning":"error"};if(e.fix){let{range:t,text:a}=e.fix,i=t[0]+n.pos-o,l=t[1]+n.pos-o;r.actions=[{name:"fix",apply(e,t){e.dispatch({changes:{from:t+i,to:t+l,insert:a},scrollIntoView:!0})}}]}return r}export{z as autoCloseTags,E as completionPath,Z as esLint,L as javascript,I as javascriptLanguage,F as jsxLanguage,D as localCompletionSource,O as scopeCompletionSource,S as snippets,N as tsxLanguage,j as typescriptLanguage,$ as typescriptSnippets};export default null;
