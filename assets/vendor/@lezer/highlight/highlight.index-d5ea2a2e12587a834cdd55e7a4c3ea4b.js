/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@lezer/highlight@1.2.1/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{NodeProp as t}from"@lezer/common";let e=0;class a{constructor(t,a,i,r){this.name=t,this.set=a,this.base=i,this.modified=r,this.id=e++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let i="string"==typeof t?t:"?";if(t instanceof a&&(e=t),null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let r=new a(i,[],null,[]);if(r.set.push(r),e)for(let t of e.set)r.set.push(t);return r}static defineModifier(t){let e=new r(t);return t=>t.modified.indexOf(e)>-1?t:r.get(t.base||t,t.modified.concat(e).sort(((t,e)=>t.id-e.id)))}}let i=0;class r{constructor(t){this.name=t,this.instances=[],this.id=i++}static get(t,e){if(!e.length)return t;let i=e[0].instances.find((a=>{return a.base==t&&(i=e,r=a.modified,i.length==r.length&&i.every(((t,e)=>t==r[e])));var i,r}));if(i)return i;let o=[],n=new a(t.name,o,t,e);for(let t of e)t.instances.push(n);let s=function(t){let e=[[]];for(let a=0;a<t.length;a++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[a]));return e.sort(((t,e)=>e.length-t.length))}(e);for(let e of t.set)if(!e.modified.length)for(let t of s)o.push(r.get(e,t));return n}}function o(t){let e=Object.create(null);for(let a in t){let i=t[a];Array.isArray(i)||(i=[i]);for(let t of a.split(" "))if(t){let a=[],r=2,o=t;for(let e=0;;){if("..."==o&&e>0&&e+3==t.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!i)throw new RangeError("Invalid path: "+t);if(a.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),e+=i[0].length,e==t.length)break;let n=t[e++];if(e==t.length&&"!"==n){r=0;break}if("/"!=n)throw new RangeError("Invalid path: "+t);o=t.slice(e)}let n=a.length-1,l=a[n];if(!l)throw new RangeError("Invalid path: "+t);let c=new s(i,r,n>0?a.slice(0,n):null);e[l]=c.sort(e[l])}}return n.add(e)}const n=new t;class s{constructor(t,e,a,i){this.tags=t,this.mode=e,this.context=a,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function l(t,e){let a=Object.create(null);for(let e of t)if(Array.isArray(e.tag))for(let t of e.tag)a[t.id]=e.class;else a[e.tag.id]=e.class;let{scope:i,all:r=null}=e||{};return{style:t=>{let e=r;for(let i of t)for(let t of i.set){let i=a[t.id];if(i){e=e?e+" "+i:i;break}}return e},scope:i}}function c(t,e,a,i=0,r=t.length){let o=new f(i,Array.isArray(e)?e:[e],a);o.highlightRange(t.cursor(),i,r,"",o.highlighters),o.flush(r)}function h(t,e,a,i,r,o=0,n=t.length){let s=o;function l(e,a){if(!(e<=s)){for(let o=t.slice(s,e),n=0;;){let t=o.indexOf("\n",n),e=t<0?o.length:t;if(e>n&&i(o.slice(n,e),a),t<0)break;r(),n=t+1}s=e}}c(e,a,((t,e,a)=>{l(t,""),l(e,a)}),o,n),l(n,"")}s.empty=new s([],2,null);class f{constructor(t,e,a){this.at=t,this.highlighters=e,this.span=a,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(e,a,i,r,o){let{type:n,from:l,to:c}=e;if(l>=i||c<=a)return;n.isTop&&(o=this.highlighters.filter((t=>!t.scope||t.scope(n))));let h=r,f=g(e)||s.empty,d=function(t,e){let a=null;for(let i of t){let t=i.style(e);t&&(a=a?a+" "+t:t)}return a}(o,f.tags);if(d&&(h&&(h+=" "),h+=d,1==f.mode&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(a,l),h),f.opaque)return;let m=e.tree&&e.tree.prop(t.mounted);if(m&&m.overlay){let t=e.node.enter(m.overlay[0].from+l,1),n=this.highlighters.filter((t=>!t.scope||t.scope(m.tree.type))),s=e.firstChild();for(let f=0,g=l;;f++){let d=f<m.overlay.length?m.overlay[f]:null,p=d?d.from+l:c,u=Math.max(a,g),k=Math.min(i,p);if(u<k&&s)for(;e.from<k&&(this.highlightRange(e,u,k,r,o),this.startSpan(Math.min(k,e.to),h),!(e.to>=p)&&e.nextSibling()););if(!d||p>i)break;g=d.to+l,g>a&&(this.highlightRange(t.cursor(),Math.max(a,d.from+l),Math.min(i,g),"",n),this.startSpan(Math.min(i,g),h))}s&&e.parent()}else if(e.firstChild()){m&&(r="");do{if(!(e.to<=a)){if(e.from>=i)break;this.highlightRange(e,a,i,r,o),this.startSpan(Math.min(i,e.to),h)}}while(e.nextSibling());e.parent()}}}function g(t){let e=t.type.prop(n);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const d=a.define,m=d(),p=d(),u=d(p),k=d(p),b=d(),y=d(b),N=d(b),w=d(),v=d(w),x=d(),M=d(),O=d(),S=d(O),R=d(),C={comment:m,lineComment:d(m),blockComment:d(m),docComment:d(m),name:p,variableName:d(p),typeName:u,tagName:d(u),propertyName:k,attributeName:d(k),className:d(p),labelName:d(p),namespace:d(p),macroName:d(p),literal:b,string:y,docString:d(y),character:d(y),attributeValue:d(y),number:N,integer:d(N),float:d(N),bool:d(b),regexp:d(b),escape:d(b),color:d(b),url:d(b),keyword:x,self:d(x),null:d(x),atom:d(x),unit:d(x),modifier:d(x),operatorKeyword:d(x),controlKeyword:d(x),definitionKeyword:d(x),moduleKeyword:d(x),operator:M,derefOperator:d(M),arithmeticOperator:d(M),logicOperator:d(M),bitwiseOperator:d(M),compareOperator:d(M),updateOperator:d(M),definitionOperator:d(M),typeOperator:d(M),controlOperator:d(M),punctuation:O,separator:d(O),bracket:S,angleBracket:d(S),squareBracket:d(S),paren:d(S),brace:d(S),content:w,heading:v,heading1:d(v),heading2:d(v),heading3:d(v),heading4:d(v),heading5:d(v),heading6:d(v),contentSeparator:d(w),list:d(w),quote:d(w),emphasis:d(w),strong:d(w),link:d(w),monospace:d(w),strikethrough:d(w),inserted:d(),deleted:d(),changed:d(),invalid:d(),meta:R,documentMeta:d(R),annotation:d(R),processingInstruction:d(R),definition:a.defineModifier("definition"),constant:a.defineModifier("constant"),function:a.defineModifier("function"),standard:a.defineModifier("standard"),local:a.defineModifier("local"),special:a.defineModifier("special")};for(let t in C){let e=C[t];e instanceof a&&(e.name=t)}const A=l([{tag:C.link,class:"tok-link"},{tag:C.heading,class:"tok-heading"},{tag:C.emphasis,class:"tok-emphasis"},{tag:C.strong,class:"tok-strong"},{tag:C.keyword,class:"tok-keyword"},{tag:C.atom,class:"tok-atom"},{tag:C.bool,class:"tok-bool"},{tag:C.url,class:"tok-url"},{tag:C.labelName,class:"tok-labelName"},{tag:C.inserted,class:"tok-inserted"},{tag:C.deleted,class:"tok-deleted"},{tag:C.literal,class:"tok-literal"},{tag:C.string,class:"tok-string"},{tag:C.number,class:"tok-number"},{tag:[C.regexp,C.escape,C.special(C.string)],class:"tok-string2"},{tag:C.variableName,class:"tok-variableName"},{tag:C.local(C.variableName),class:"tok-variableName tok-local"},{tag:C.definition(C.variableName),class:"tok-variableName tok-definition"},{tag:C.special(C.variableName),class:"tok-variableName2"},{tag:C.definition(C.propertyName),class:"tok-propertyName tok-definition"},{tag:C.typeName,class:"tok-typeName"},{tag:C.namespace,class:"tok-namespace"},{tag:C.className,class:"tok-className"},{tag:C.macroName,class:"tok-macroName"},{tag:C.propertyName,class:"tok-propertyName"},{tag:C.operator,class:"tok-operator"},{tag:C.comment,class:"tok-comment"},{tag:C.meta,class:"tok-meta"},{tag:C.invalid,class:"tok-invalid"},{tag:C.punctuation,class:"tok-punctuation"}]);export{a as Tag,A as classHighlighter,g as getStyleTags,h as highlightCode,c as highlightTree,o as styleTags,l as tagHighlighter,C as tags};export default null;
